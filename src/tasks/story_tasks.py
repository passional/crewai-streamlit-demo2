from crewai import Task

class StoryTasks:
    def create_story_task(self, agent, outline, style_guide):
        return Task(
            description=f"""
    基于提供的视频大纲：
        {outline}
    -------------------------

    **文风参考 (Style Guide)：**
        {style_guide if style_guide else "无"}
    -------------------------

    创作一份完整的中文YouTube口播文案。

    核心执行要求如下：

    1. **文风参考**: 如果提供了文风参考，请仔细分析其结构、开头方式、叙事风格、语言特色等，并在创作中模仿和借鉴这些特点。特别注意：
       - 开头的引入方式和节奏
       - 段落的组织结构
       - 语言的表达风格和用词习惯
       - 内容展开的逻辑方式
       - 如果参考文本是英文，请将其风格特点转化为符合中文表达习惯的方式
    2. **开篇设计**: 必须极具冲击力。直接切入最核心、最颠覆认知或最引人好奇的科学事实或矛盾点，迅速建立视频的专业性和观看价值。
    3. **语言风格与解释方式**: 你的解释应优先使用**具体的、可感知的案例进行对比**，而不是依赖抽象或通俗的比喻。**请务必避免使用“悬案”、“侦探”等过于戏剧化或显得生硬的比喻框架。**
    4. **叙事节奏与信息密度**: 全文需保持张弛有度的叙事节奏。每个句子都应包含新信息或对前一信息的深化，避免空话。
    5. **字数要求**: 1500~2000字左右。
    6. **段落结构**: 保持清晰的段落结构，确保每个句子或短意群为独立的一行，便于后续翻译和对照处理。


    你将接收到一个名为 `outline` 的变量，其中包含了视频的核心结构和要点。请严格依据此大纲展开创作。


            """,
            expected_output=f"""

    一份可以直接用于视频录制的、完整的中文YouTube口播文案。

    该文案必须满足以下交付标准：
    - **语言**: 使用简体中文，语言自然流畅
    - **结构完整**: 包含一个引人深思的开头、逻辑严谨的主体内容，以及一个强有力的结尾。
    - **专业且严谨的语调**: 文案整体风格应体现科学传播的严谨性，通过揭示科学矛盾和进行事实对比来增强吸引力。
    - **段落结构清晰**: 每个短意群为独立的一行，便于后续处理
    - **最终成品**: 输出的文案是一篇纯净的中文文本稿件，文稿中不包含任何括号 `()`。可直接用于AI语音生成，无需任何手动清理或修改。
            """,
            agent=agent
        )

